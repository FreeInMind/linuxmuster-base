Distributions-Upgrade von paedML 3.0 auf 4.0

Mit diesem Upgrade wird das Betriebssystem der paedML 3.0 von Debian 3.1 (Sarge) auf Debian 4.0 (Etch) aktualisiert. Gleichzeitig werden folgende paedML spezifischen Software-Pakete aktualisiert:
linuxmuster-base
linuxmuster-tasks
linuxmuster-ipcop
linuxmuster-schulkonsole
sophomorix
moodle (Version 1.9)
linux-image (Kernel 2.6.20)


Voraussetzungen
aktuelles paedML 3.0 System mit aktuellem Backup
mindestens 800MB freier Speicherplatz unter /var
aktuelles Backup der Moodle-Datenbank


Vorgehensweise

1.Die Datei /etc/apt/sources.list muss um folgende Zeile ergänzt werden:
deb http://pkg.lml.support-netz.de/paedml40-upgrade ./

2.Danach den Server aktualisieren:
# aptitude update
# aptitude dist-upgrade
Falls der update-Befehl fehlende Dateien meldet,  muss er ein zweites Mal ausgeführt werden. Es werden nun u.a. die linuxmuster-base- und linuxmuster-task-Pakete aktualisiert. Wenn das Paketsystem während der Installation eine neue Version einer Konfigurationsdatei meldet und eine Eingabe verlangt, immer den Standardweg wählen, also „N“ eingeben oder einfach ENTER drücken.

3.Jetzt kann der Upgrade-Prozess durch Eingabe des Befehls
# paedml-etch-upgrade
in einer Rootkonsole gestartet werden.
Es werden zunächst einige Softwarepakete entfernt, die jedoch später in aktualisierten Versionen wieder installiert werden. Es gehen keine Konfigurations- und/oder Userdaten verloren. Unterbrechen Sie das Skript also nicht!
Abhängig von Internetanbindung und Hardware muss man ca. 45-60 Minuten für das Upgrade einplanen. Es muss ca. 500MB an Software heruntergeladen und installiert werden.
Das Upgrade-Skript verlangt keinerlei Benutzereingaben, kann also auch unbeaufsichtigt durchlaufen. Alle Ausgaben werden in der Datei /var/log/linuxmuster/etch-upgrade.log mitgeloggt.

4.Wenn das Skript durchgelaufen ist, muss der Server neu gestartet werden. Damit ist die Upgrade-Prozedur abgeschlossen.


Nach dem Upgrade

Falls Sie zusätzliche Softwarepakete auf dem Server installiert hatten, die nicht im ursprünglichen Installationsumfang der paedML Linux enthalten waren, ist es möglich, dass diese während des Upgrades deinstalliert wurden. Da jedoch keine Konfigurationsdateien gelöscht wurden, wird eine Neuinstallation der entsprechenden Pakete die alte Funktionalität wieder herstellen.

Im Zuge der Aktualisierung wurde auch ein neuer Kernel installiert. Sollte dieser wider Erwarten nicht booten, kann der Server auch wieder mit dem alten Kernel gestartet werden, der nach wie vor im Bootmenü zur Auswahl steht. Wenden Sie sich in diesem Fall an die Hotline oder die Mailingliste.

Da Moodle nun in der Version 1.9 vorliegt, muss dessen Datenbank aktualisiert werden. Loggen Sie sich dazu als User wwwadmin in Moodle ein und klicken Sie sich durch das Datenbank-Update hindurch. 

Webmin ist leider nicht mehr im Software-Pool der Debian-Distribution vorhanden. Falls Sie weiterhin mit Webmin arbeiten wollen, installieren Sie das Debian-Paket, das auf der Homepage des Webmin-Projektes http://www.webmin.com/ zum Download bereitgestellt wird.


29. Mai 2008
Thomas Schmitt
<tschmitt@lmz-bw.de>